<div class="container box">
  <button mat-mini-fab routerLink="/courriel/entities">
    <mat-icon>arrow_back</mat-icon>
  </button>
  <header>
    <h1>New Entity [{{ parent_entity?.short }} > {{ short.value }}]</h1>
  </header>
  <entity-autocomplete
    label="Parent"
    [formControl]="parentEntity"
  ></entity-autocomplete>
  <form [formGroup]="newNewEntityForm" (ngSubmit)="submit()">
    <mat-form-field appearance="outline">
      <mat-label>Nom (Ex: Cellule Informatique ...) </mat-label>
      <input
        matInput
        type="text"
        name="long"
        id="long"
        formControlName="long"
      />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Abréviation (Ex: CIFAG)</mat-label>
      <input
        #short
        (keyup)="newNewEntityForm.patchValue({ short_header: short.value })"
        matInput
        type="text"
        name="short"
        id="short"
        formControlName="short"
      />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Entête (Ex: MEF/SG/DGFAG)</mat-label>
      <span matPrefix>{{ this.parent_entity.short_header }}/ </span>
      <input
        matInput
        type="text"
        name="short_header"
        id="short_header"
        formControlName="short_header"
      />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Niveau</mat-label>
      <input
        matInput
        type="number"
        name="level"
        id="level"
        formControlName="level"
      />
    </mat-form-field>
    <div>
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="!newNewEntityForm.valid"
      >
        Valider
      </button>
    </div>
  </form>
</div>
